#ifndef BLE_MANAGER_H
#define BLE_MANAGER_H

#include "esp_nimble_hci.h"
#include "nimble/nimble_port.h"
#include "nimble/nimble_port_freertos.h"
#include "host/ble_hs.h"
#include "services/gap/ble_svc_gap.h"
#include "services/gatt/ble_svc_gatt.h"

/*
OUTPUT:

Full UUID: 3c58821e-0801-42a1-aa10-cf5f094a2ae6
ESP format: 0x1e, 0x82, 0x58, 0x3c, 0x01, 0x08, 0xa1, 0x42, 0xaa, 0x10, 0xcf, 0x5f, 0x09, 0x4a, 0x2a, 0xe6
Full UUID: af19db44-effd-4a09-a7d3-245250a2bfe3
ESP format: 0x44, 0xdb, 0x19, 0xaf, 0xfd, 0xef, 0x09, 0x4a, 0xa7, 0xd3, 0x24, 0x52, 0x50, 0xa2, 0xbf, 0xe3
Full UUID: d2024fbc-ba60-4387-8da5-c8afd58fcf8c
ESP format: 0xbc, 0x4f, 0x02, 0xd2, 0x60, 0xba, 0x87, 0x43, 0x8d, 0xa5, 0xc8, 0xaf, 0xd5, 0x8f, 0xcf, 0x8c
Full UUID: 2a5cd4f2-d72b-4ecd-a701-54719cd56850
ESP format: 0xf2, 0xd4, 0x5c, 0x2a, 0x2b, 0xd7, 0xcd, 0x4e, 0xa7, 0x01, 0x54, 0x71, 0x9c, 0xd5, 0x68, 0x50

Service UUID: 3c58821e-0801-42a1-aa10-cf5f094a2ae6
Historical Data Characteristic UUID: af19db44-effd-4a09-a7d3-245250a2bfe3
Data Control Characteristic UUID: d2024fbc-ba60-4387-8da5-c8afd58fcf8c
Data Metadata Characteristic UUID: 2a5cd4f2-d72b-4ecd-a701-54719cd56850
*/

#define DEVICE_NAME         "ESP32-S3 BLE Device"

// Service UUID: 3c58821e-0801-42a1-aa10-cf5f094a2ae6
#define SERVICE_UUID 0x1e, 0x82, 0x58, 0x3c, 0x01, 0x08, 0xa1, 0x42, 0xaa, 0x10, 0xcf, 0x5f, 0x09, 0x4a, 0x2a, 0xe6

#define HISTORICAL_DATA_SERVICE_UUID 0x44, 0xdb, 0x19, 0xaf, 0xfd, 0xef, 0x09, 0x4a, 0xa7, 0xd3, 0x24, 0x52, 0x50, 0xa2, 0xbf, 0xe3
#define SENSOR_CONTROL_UUID 0xbc, 0x4f, 0x02, 0xd2, 0x60, 0xba, 0x87, 0x43, 0x8d, 0xa5, 0xc8, 0xaf, 0xd5, 0x8f, 0xcf, 0x8c
#define SENSOR_METADATA_UUID 0xf2, 0xd4, 0x5c, 0x2a, 0x2b, 0xd7, 0xcd, 0x4e, 0xa7, 0x01, 0x54, 0x71, 0x9c, 0xd5, 0x68, 0x50

void ble_init(void);
void ble_advertise(void);
int ble_gap_event(struct ble_gap_event *event, void *arg);
void ble_app_on_sync(void);
void host_task(void *param);

#endif 